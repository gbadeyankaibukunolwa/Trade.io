<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trade.io</title>
  <link rel="icon" href="1759175712.png" type="image/png">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0d3b2a;
      --accent: #c9a96e;
      --light: #f8f4ed;
      --text: #2e2e2e;
      --shadow: 0 8px 24px rgba(13, 59, 42, 0.15);
      --transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      --admin-primary: #2c3e50;
      --admin-accent: #3498db;
      --danger: #e74c3c;
      --success: #2ecc71;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--light);
      color: var(--text);
      line-height: 1.6;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 24px 5%;
      background: white;
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    header h1 {
      font-family: 'Cormorant Garamond', serif;
      font-weight: 700;
      font-size: 2.2rem;
      color: var(--primary);
    }

    nav button {
      background: var(--accent);
      color: white;
      border: none;
      padding: 10px 24px;
      border-radius: 30px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 4px 12px rgba(201, 169, 110, 0.3);
    }

    nav button:hover {
      background: #b89a5d;
      transform: translateY(-2px);
    }

    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 32px;
      padding: 40px 5%;
    }

    .product {
      background: white;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      position: relative;
    }

    .product:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(13, 59, 42, 0.25);
    }

    .product img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: #f0ede7;
    }

    .product h3 {
      padding: 16px 20px 8px;
      font-size: 1.25rem;
      color: var(--primary);
    }

    .product p {
      padding: 0 20px 16px;
      font-weight: 600;
      color: var(--accent);
      font-size: 1.1rem;
    }

    .buy-btn {
      width: calc(100% - 40px);
      margin: 0 20px 20px;
      padding: 12px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      font-family: 'Montserrat', sans-serif;
    }

    .buy-btn:hover {
      background: #0a2a1f;
      transform: scale(1.03);
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      inset: 0;
      background: rgba(13, 59, 42, 0.85);
      backdrop-filter: blur(6px);
    }

    .modal-content {
      background: white;
      margin: 10% auto;
      padding: 32px;
      width: 92%;
      max-width: 520px;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.25);
      position: relative;
    }

    .close {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 28px;
      font-weight: bold;
      color: #aaa;
      cursor: pointer;
    }

    .close:hover {
      color: var(--primary);
    }

    .modal-content h2 {
      text-align: center;
      margin-bottom: 24px;
      color: var(--primary);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
    }

    .form-group {
      margin: 18px 0;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--primary);
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 14px;
      border: 1px solid #e0d6c4;
      border-radius: 12px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(201, 169, 110, 0.2);
    }

    .page { display: none; }
    .page.active { display: block; }

    /* Product Confirmation Modal */
    #productModal {
      display: none;
      position: fixed;
      z-index: 1000;
      inset: 0;
      background: rgba(13, 59, 42, 0.85);
      backdrop-filter: blur(6px);
    }

    .product-card {
      background: white;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: var(--shadow);
      margin-bottom: 24px;
    }

    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .product-card .details {
      padding: 20px;
    }

    .product-card h3 {
      font-size: 1.5rem;
      color: var(--primary);
      margin-bottom: 10px;
    }

    .product-card .price {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--accent);
      margin: 10px 0;
    }

    .product-card .desc {
      color: var(--text);
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .confirmation-question {
      text-align: center;
      font-size: 1.3rem;
      margin: 20px 0;
      font-weight: 600;
    }

    .modal-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }

    .modal-actions button {
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      font-family: 'Montserrat', sans-serif;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      flex: 1;
    }

    .confirm-btn {
      background: var(--primary);
      color: white;
    }

    .confirm-btn:hover {
      background: #0a2a1f;
      transform: scale(1.03);
    }

    .cancel-btn {
      background: #e0e0e0;
      color: var(--text);
    }

    .cancel-btn:hover {
      background: #d0d0d0;
      transform: scale(1.03);
    }

    /* Contact Form Specific */
    #contactForm {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 32px;
      border-radius: 20px;
      box-shadow: var(--shadow);
    }

    #contactForm h2 {
      text-align: center;
      margin-bottom: 24px;
      color: var(--primary);
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.8rem;
    }

    #form-message {
      text-align: center;
      margin-top: 16px;
      min-height: 24px;
      font-weight: 600;
    }

    /* Admin Dashboard Styles */
    #admin-dashboard {
      background-color: #f5f7fa;
      padding: 20px 5%;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--admin-accent);
    }

    .admin-header h2 {
      color: var(--admin-primary);
      font-size: 2rem;
    }

    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      text-align: center;
    }

    .stat-card h3 {
      color: var(--admin-accent);
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    .stat-card .value {
      font-size: 2rem;
      font-weight: bold;
      color: var(--admin-primary);
    }

    .orders-table, .products-table {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      margin-bottom: 30px;
    }

    .orders-table table, .products-table table {
      width: 100%;
      border-collapse: collapse;
    }

    .orders-table th, .products-table th {
      background-color: var(--admin-primary);
      color: white;
      padding: 15px;
      text-align: left;
    }

    .orders-table td, .products-table td {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
    }

    .orders-table tr:last-child td, .products-table tr:last-child td {
      border-bottom: none;
    }

    .status {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: bold;
    }

    .status.paid {
      background-color: #e8f5e9;
      color: #2e7d32;
    }

    .status.pending {
      background-color: #fff8e1;
      color: #f57f17;
    }

    .add-product-form, .edit-product-form {
      background: white;
      border-radius: 15px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-width: 600px;
      margin: 0 auto;
    }

    .add-product-form h3, .edit-product-form h3 {
      margin-bottom: 20px;
      color: var(--admin-primary);
      text-align: center;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-bottom: 15px;
    }

    @media (max-width: 768px) {
      .form-row {
        grid-template-columns: 1fr;
      }
    }

    .admin-btn {
      background: var(--admin-accent);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 10px;
    }

    .admin-btn:hover {
      background: #2980b9;
      transform: translateY(-2px);
    }

    .logout-btn {
      background: var(--danger);
    }

    .logout-btn:hover {
      background: #c0392b;
    }

    .edit-btn {
      background: var(--success);
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      cursor: pointer;
      margin-right: 8px;
    }

    .delete-btn {
      background: var(--danger);
      color: white;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .action-cell {
      text-align: center;
    }

    /* Login Modal */
    #loginModal {
      display: none;
      position: fixed;
      z-index: 1001;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
    }

    .login-content {
      background: white;
      margin: 15% auto;
      padding: 30px;
      width: 90%;
      max-width: 400px;
      border-radius: 15px;
      text-align: center;
    }

    .login-content h2 {
      margin-bottom: 20px;
      color: var(--admin-primary);
    }

    .login-form .form-group {
      margin-bottom: 15px;
    }

    .login-btn {
      background: var(--admin-accent);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      width: 100%;
      font-weight: 600;
      cursor: pointer;
      margin-top: 10px;
    }

    /* Secret Passcode Field */
    #secret-passcode {
      position: absolute;
      left: -9999px;
      opacity: 0;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 1.8rem; }
      .products { padding: 24px 12px; gap: 20px; }
      .modal-content, #contactForm { padding: 24px; }
      .admin-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .admin-header button {
        margin-top: 15px;
      }
      .modal-actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <!-- Home Page -->
  <div id="home-page" class="page active">
    <header>
      <h1>Trade.io</h1>
      <nav>
        <button onclick="showPage('contact-page')">Contact Us</button>
        <button onclick="showLoginModal()">Admin</button>
      </nav>
    </header>

    <div class="products" id="products-container">
      <!-- Products will be dynamically loaded here -->
    </div>
  </div>

  <!-- Product Confirmation Modal -->
  <div id="productModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeProductModal()">&times;</span>
      <div class="product-card">
        <img id="modal-product-image" src="" alt="Product Image">
        <div class="details">
          <h3 id="modal-product-name"></h3>
          <div class="price" id="modal-product-price"></div>
          <p class="desc" id="modal-product-desc"></p>
        </div>
      </div>
      <div class="confirmation-question">
        Are you ready to order this product?
      </div>
      <div class="modal-actions">
        <button class="cancel-btn" onclick="closeProductModal()">Cancel</button>
        <button class="confirm-btn" onclick="openWhatsApp()">Order Now</button>
      </div>
    </div>
  </div>

  <!-- Contact Page -->
  <div id="contact-page" class="page">
    <header>
      <h1>Trade.io</h1>
      <nav>
        <button onclick="showPage('home-page')">Back to Shop</button>
        <button onclick="showLoginModal()">Admin</button>
      </nav>
    </header>
    <div style="padding: 50px 5%; margin-top: 20px;">
      <form id="contactForm">
        <h2>Send Us a Message</h2>
        <div class="form-group">
          <label for="name">Your Name *</label>
          <input type="text" id="name" required>
        </div>
        <div class="form-group">
          <label for="email">Your Email *</label>
          <input type="email" id="email" required>
        </div>
        <div class="form-group">
          <label for="message">Message *</label>
          <textarea id="message" rows="5" required></textarea>
        </div>
        <button type="button" class="buy-btn" style="width:100%;" onclick="sendEmail()">
          Send Message via Email
        </button>
        <p id="form-message"></p>
      </form>
    </div>
  </div>

  <!-- Admin Login Modal -->
  <div id="loginModal" class="modal">
    <div class="login-content">
      <h2>Admin Access</h2>
      <form id="loginForm">
        <div class="form-group">
          <label>Enter Secret Passcode</label>
          <input type="password" id="admin-passcode" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
          <!-- Hidden field for actual secret -->
          <input type="text" id="secret-passcode" value="ibukun2023" readonly>
        </div>
        <button type="button" class="login-btn" onclick="loginAdmin()">Access Dashboard</button>
      </form>
      <p style="margin-top: 15px; font-size: 0.9rem; color: #777;">Contact admin for passcode</p>
    </div>
  </div>

  <!-- Admin Dashboard -->
  <div id="admin-dashboard" class="page">
    <header>
      <h1>Admin Dashboard</h1>
      <nav>
        <button class="logout-btn" onclick="logoutAdmin()">Logout</button>
      </nav>
    </header>
    
    <div class="admin-header">
      <h2>Dashboard Overview</h2>
      <button class="admin-btn" onclick="toggleProductForm()">Add New Product</button>
    </div>
    
    <div class="stats-container">
      <div class="stat-card">
        <h3>Total Orders</h3>
        <div class="value" id="total-orders">0</div>
      </div>
      <div class="stat-card">
        <h3>Total Revenue</h3>
        <div class="value" id="total-revenue">â‚¦0</div>
      </div>
      <div class="stat-card">
        <h3>Pending Orders</h3>
        <div class="value" id="pending-orders">0</div>
      </div>
      <div class="stat-card">
        <h3>Total Products</h3>
        <div class="value" id="total-products">0</div>
      </div>
    </div>
    
    <h3 style="margin: 20px 0 15px; color: var(--admin-primary);">Recent Orders</h3>
    <div class="orders-table">
      <table id="orders-table">
        <thead>
          <tr>
            <th>Order ID</th>
            <th>Customer</th>
            <th>Product</th>
            <th>Amount</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="orders-body">
          <!-- Orders will be populated here -->
        </tbody>
      </table>
    </div>
    
    <h3 style="margin: 30px 0 15px; color: var(--admin-primary);">Manage Products</h3>
    <div class="products-table">
      <table id="products-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Product</th>
            <th>Price</th>
            <th>Image</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="products-body">
          <!-- Products will be populated here -->
        </tbody>
      </table>
    </div>
    
    <div id="product-form-container" style="display: none; margin-top: 30px;">
      <div class="add-product-form">
        <h3 id="form-title">Add Product to Store</h3>
        <form id="productForm">
          <input type="hidden" id="edit-product-id">
          <div class="form-group">
            <label>Product Name</label>
            <input type="text" id="new-product-name" placeholder="Enter product name" required>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Price (â‚¦)</label>
              <input type="number" id="new-product-price" placeholder="Enter price" required>
            </div>
            <div class="form-group">
              <label>Image URL</label>
              <input type="text" id="new-product-image" placeholder="Image URL (optional)">
            </div>
          </div>
          <div class="form-group">
            <label>Description</label>
            <textarea id="new-product-desc" placeholder="Product description" rows="2"></textarea>
          </div>
          <button type="button" class="admin-btn" onclick="saveProduct()">Save Product</button>
          <button type="button" class="admin-btn" style="background: #95a5a6;" onclick="toggleProductForm()">Cancel</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://js.paystack.co/v1/inline.js"></script>
  <script>
    // Initialize local storage if not exists
    if (!localStorage.getItem('orders')) {
      localStorage.setItem('orders', JSON.stringify([]));
    }
    if (!localStorage.getItem('products')) {
      // Initialize with existing products
      const initialProducts = [
        { id: 1, name: "Aer Pocket Spray", price: 1500, image: "https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=Aer+Pocket+Spray", desc: "Fresh pocket spray" },
        { id: 2, name: "Aer Pocket Gel", price: 1200, image: "https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=Aer+Pocket+Gel", desc: "Gel freshener" },
        { id: 3, name: "Aer Pocket Solid", price: 1800, image: "https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=Aer+Pocket+Solid", desc: "Solid freshener" },
        { id: 4, name: "Aer Pocket Mini Diffuser", price: 2500, image: "https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=Mini+Diffuser", desc: "Mini diffuser" },
        { id: 5, name: "Aer Pocket Car Clip", price: 1000, image: "https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=Car+Clip", desc: "Car clip freshener" }
      ];
      localStorage.setItem('products', JSON.stringify(initialProducts));
    }

    // Current selected product
    let currentProduct = null;

    // Function to render products from localStorage
    function renderProducts() {
      const productsContainer = document.getElementById('products-container');
      const products = JSON.parse(localStorage.getItem('products')) || [];
      
      productsContainer.innerHTML = '';
      
      products.forEach(product => {
        const productDiv = document.createElement('div');
        productDiv.className = 'product';
        productDiv.innerHTML = `
          <img src="${product.image.trim()}" alt="${product.name} Freshener">
          <h3>${product.name}</h3>
          <p>â‚¦${parseInt(product.price).toLocaleString()}</p>
          <button class="buy-btn" onclick="showProductModal(${product.id})">Order Now</button>
        `;
        productsContainer.appendChild(productDiv);
      });
    }

    // Render products when page loads
    document.addEventListener('DOMContentLoaded', function() {
      renderProducts();
    });

    // Page Navigation
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById(pageId).classList.add('active');
      
      // If showing admin dashboard, load data
      if (pageId === 'admin-dashboard') {
        loadAdminData();
      }
      // If showing home page, re-render products
      else if (pageId === 'home-page') {
        renderProducts();
      }
    }

    // Product Modal Functions
    function showProductModal(productId) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products.find(p => p.id == productId);
      
      if (product) {
        currentProduct = product;
        document.getElementById('modal-product-image').src = product.image.trim();
        document.getElementById('modal-product-name').textContent = product.name;
        document.getElementById('modal-product-price').textContent = `â‚¦${parseInt(product.price).toLocaleString()}`;
        document.getElementById('modal-product-desc').textContent = product.desc;
        document.getElementById('productModal').style.display = 'block';
      }
    }

    function closeProductModal() {
      document.getElementById('productModal').style.display = 'none';
      currentProduct = null;
    }

    // WhatsApp Order Function
    function openWhatsApp() {
      if (!currentProduct) return;
      
      const message = encodeURIComponent(
        `Hello Trade.io! ðŸ‘‹\n\n` +
        `I'm ready to order:\n` +
        `ðŸ›’ Product: ${currentProduct.name}\n` +
        `ðŸ’° Price: â‚¦${parseInt(currentProduct.price).toLocaleString()}\n\n` +
        `Please send me the payment link. Thank you!`
      );
      
      const whatsappUrl = `https://wa.me/2348066438188?text=${message}`;
      window.open(whatsappUrl, '_blank');
      
      closeProductModal();
    }

    // âœ‰ï¸ CONTACT EMAIL FUNCTION
    function sendEmail() {
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;
      const message = document.getElementById('message').value;
      const status = document.getElementById('form-message');

      if (!name || !email || !message) {
        status.style.color = '#e74c3c';
        status.textContent = 'Please fill all fields.';
        return;
      }

      const subject = `Message from Trade.io Website`;
      const body = `Name: ${name}%0D%0AEmail: ${email}%0D%0A%0D%0AMessage:%0D%0A${message}`;
      const mailtoLink = `mailto:gbadeyankaibukunolwa@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

      // Open email client
      window.location.href = mailtoLink;

      // Optional: show success note
      status.style.color = 'var(--accent)';
      status.textContent = 'Opening your email app...';
    }

    // Admin Functions
    function showLoginModal() {
      document.getElementById('loginModal').style.display = 'block';
    }

    function loginAdmin() {
      const enteredPasscode = document.getElementById('admin-passcode').value;
      const secretPasscode = document.getElementById('secret-passcode').value;
      
      if (enteredPasscode === secretPasscode) {
        document.getElementById('loginModal').style.display = 'none';
        showPage('admin-dashboard');
        document.getElementById('loginForm').reset();
      } else {
        alert('Incorrect passcode. Please contact the administrator for the correct passcode.');
      }
    }

    function logoutAdmin() {
      showPage('home-page');
    }

    function loadAdminData() {
      const orders = JSON.parse(localStorage.getItem('orders')) || [];
      const products = JSON.parse(localStorage.getItem('products')) || [];
      
      const totalOrders = orders.length;
      const totalRevenue = orders.reduce((sum, order) => sum + parseInt(order.amount), 0);
      const pendingOrders = orders.filter(order => order.status === 'pending').length;
      const totalProducts = products.length;
      
      document.getElementById('total-orders').textContent = totalOrders;
      document.getElementById('total-revenue').textContent = 'â‚¦' + totalRevenue.toLocaleString();
      document.getElementById('pending-orders').textContent = pendingOrders;
      document.getElementById('total-products').textContent = totalProducts;
      
      // Populate orders table
      const ordersBody = document.getElementById('orders-body');
      ordersBody.innerHTML = '';
      
      // Show last 5 orders
      const recentOrders = orders.slice(-5).reverse();
      recentOrders.forEach(order => {
        const row = ordersBody.insertRow();
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customer}</td>
          <td>${order.product}</td>
          <td>â‚¦${parseInt(order.amount).toLocaleString()}</td>
          <td><span class="status ${order.status}">${order.status.charAt(0).toUpperCase() + order.status.slice(1)}</span></td>
        `;
      });
      
      if (recentOrders.length === 0) {
        const row = ordersBody.insertRow();
        row.innerHTML = `<td colspan="5" style="text-align: center; padding: 20px;">No orders yet</td>`;
      }
      
      // Populate products table
      const productsBody = document.getElementById('products-body');
      productsBody.innerHTML = '';
      
      products.forEach(product => {
        const row = productsBody.insertRow();
        row.innerHTML = `
          <td>${product.id}</td>
          <td>${product.name}</td>
          <td>â‚¦${parseInt(product.price).toLocaleString()}</td>
          <td><img src="${product.image}" alt="${product.name}" style="width: 50px; height: 50px; object-fit: cover; border-radius: 4px;"></td>
          <td class="action-cell">
            <button class="edit-btn" onclick="editProduct(${product.id})">Edit</button>
            <button class="delete-btn" onclick="deleteProduct(${product.id})">Delete</button>
          </td>
        `;
      });
    }

    function toggleProductForm() {
      const formContainer = document.getElementById('product-form-container');
      const formTitle = document.getElementById('form-title');
      const editId = document.getElementById('edit-product-id');
      
      if (formContainer.style.display === 'none') {
        formContainer.style.display = 'block';
        formTitle.textContent = 'Add Product to Store';
        editId.value = '';
        document.getElementById('productForm').reset();
      } else {
        formContainer.style.display = 'none';
      }
    }

    function addProduct() {
      toggleProductForm();
    }

    function saveProduct() {
      const id = document.getElementById('edit-product-id').value;
      const name = document.getElementById('new-product-name').value;
      const price = document.getElementById('new-product-price').value;
      const image = document.getElementById('new-product-image').value.trim() || 
        `https://via.placeholder.com/220x180/0d3b2a/c9a96e?text=${encodeURIComponent(name)}`;
      const desc = document.getElementById('new-product-desc').value;
      
      if (!name || !price) {
        alert('Please fill required fields');
        return;
      }
      
      const products = JSON.parse(localStorage.getItem('products')) || [];
      
      if (id) {
        // Edit existing product
        const index = products.findIndex(p => p.id == id);
        if (index !== -1) {
          products[index] = { id: parseInt(id), name, price: parseInt(price), image, desc };
          localStorage.setItem('products', JSON.stringify(products));
          alert('Product updated successfully!');
        }
      } else {
        // Add new product
        const newProduct = {
          id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
          name: name,
          price: parseInt(price),
          image: image,
          desc: desc
        };
        
        products.push(newProduct);
        localStorage.setItem('products', JSON.stringify(products));
        alert('Product added successfully!');
      }
      
      // Re-render products on home page
      renderProducts();
      // Reload admin data
      loadAdminData();
      // Hide form
      toggleProductForm();
    }

    function editProduct(id) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const product = products.find(p => p.id == id);
      
      if (product) {
        document.getElementById('edit-product-id').value = product.id;
        document.getElementById('new-product-name').value = product.name;
        document.getElementById('new-product-price').value = product.price;
        document.getElementById('new-product-image').value = product.image;
        document.getElementById('new-product-desc').value = product.desc;
        
        document.getElementById('form-title').textContent = 'Edit Product';
        document.getElementById('product-form-container').style.display = 'block';
      }
    }

    function deleteProduct(id) {
      if (confirm('Are you sure you want to delete this product? This action cannot be undone.')) {
        const products = JSON.parse(localStorage.getItem('products')) || [];
        const updatedProducts = products.filter(p => p.id != id);
        localStorage.setItem('products', JSON.stringify(updatedProducts));
        
        alert('Product deleted successfully!');
        renderProducts();
        loadAdminData();
      }
    }

    // Close modals when clicking outside
    window.onclick = function(event) {
      const productModal = document.getElementById('productModal');
      const loginModal = document.getElementById('loginModal');
      
      if (event.target === productModal) {
        productModal.style.display = 'none';
      }
      if (event.target === loginModal) {
        loginModal.style.display = 'none';
      }
    }
  </script>
</body>
</html>